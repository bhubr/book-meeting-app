(this["webpackJsonpcalendar-app"]=this["webpackJsonpcalendar-app"]||[]).push([[0],{14:function(e,a,t){e.exports=t(34)},32:function(e,a,t){},33:function(e,a,t){},34:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=t(13),l=t.n(c),s=t(5),o=t.n(s),i=(t(30),t(31),t(6)),u=t(9),m=t.n(u),d=(t(32),["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]),v=["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],f=function(e,a){return!(!e||!a)&&(e.getYear()===a.getYear()&&(e.getMonth()===a.getMonth()&&e.getDate()===a.getDate()))};function p(e){for(var a=e.dowStart,t=e.currentMonth,n=e.renderDay,c=e.isDisabled,l=e.selectedDate,s=e.onSelectDate,o=new Date,i=t,u=1,v=[];;){var p=new Date;if(p.setMonth(t),p.setDate(u),p.getMonth()>i)break;u++,v.push(p)}for(var h=v[0].getDay(),g=[],b=[],E=a;E<h;E++)b.push(null);for(var _=b.length,N=0;N<7-_;N++)b.push(v.shift());g.push(b),b=[];for(var D=0;v.length;)b.push(v.shift()),7===(D+=1)&&(g.push(b),b=[],D=0);if(D>0){for(var S=D;S<7;S++)b.push(null);g.push(b)}return r.a.createElement("div",null,r.a.createElement("div",{className:"Calendar__row columns",key:"header-row"},new Array(7).fill(0).map((function(e,a){return r.a.createElement("div",{key:"header-cell-".concat(a),className:"Calendar__cell--header column"},d[a])}))),g.map((function(e,a){return r.a.createElement("div",{className:"Calendar__row columns",key:"row-".concat(a)},e.map((function(e,t){return r.a.createElement("div",{key:"cell-".concat(a,"-").concat(t),className:m()("Calendar__cell","column",{empty:!e,"Calendar__cell--today":e&&f(e,o),"Calendar__cell--selected":e&&f(e,l),"Calendar__cell--disabled":!e||c(e)}),onClick:function(){return e&&!c(e)&&s(e)}},e?n(e):r.a.createElement("span",null,"\xa0"))})))})))}function h(e){var a=e.renderDay,t=e.isDisabled,c=e.selectedDate,l=e.setSelectedDate,s=Object(n.useState)(new Date),o=Object(i.a)(s,2),u=o[0],m=o[1],d=u.getMonth(),f=u.getYear()+1900,h=function(e,a){var t=(e+1).toString(),n=new Date("".concat(a,"-").concat(t.padStart(2,"0"),"-01"));m(new Date(n))};return r.a.createElement("div",{className:"Calendar"},r.a.createElement("div",{className:"Calendar__monthSelector"},r.a.createElement("span",{className:"Calendar__monthSelector__nav icon-chevron-left",onClick:function(){var e=f,a=d;0===d?(e-=1,a=11):a-=1,h(a,e)}}),r.a.createElement("span",{className:"Calendar__monthSelector__value"},v[d]," ",f),r.a.createElement("span",{className:"Calendar__monthSelector__nav icon-chevron-right",onClick:function(){var e=f,a=d;11===d?(e+=1,a=0):a+=1,h(a,e)}})),r.a.createElement(p,{currentMonth:d,renderDay:a,isDisabled:t,selectedDate:c,onSelectDate:l}))}p.defaultProps={dowStart:1};h.defaultProps={renderDay:function(e){return r.a.createElement("span",{className:"Calendar__day"},e.getDate())}};var g=h;var b=function(e){var a=e.onLogout;return r.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("a",{className:"navbar-item",href:"#"},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/3b/Calendar-Logo-256x256.png"}))),r.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu"},r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement("a",{onClick:a,className:"button is-light"},"D\xe9connexion"))))))};var E=function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},"Veuillez choisir une date dans le calendrier ",r.a.createElement("span",{role:"img"},"\ud83d\ude0a")))},_=(t(33),["09:20","10:10","14:10","15:00","15:50","16:40"]);var N=function(){var e=Object(n.useState)(!1),a=Object(i.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0],d=s[1],v=Object(n.useState)(null),f=Object(i.a)(v,2),p=f[0],h=f[1],N=Object(n.useState)(""),D=Object(i.a)(N,2),S=(D[0],D[1]),w=Object(n.useState)([]),C=Object(i.a)(w,2),O=C[0],y=C[1],k=Object(n.useState)(null),j=Object(i.a)(k,2),M=j[0],I=j[1],A=function(e){var a=e.val();if(a){var t=Object.values(a);y(t)}};Object(n.useEffect)((function(){o.a.auth().onAuthStateChanged((function(e){e&&h(e),c(!0)})),o.a.database().ref("slots").on("value",A)}),[]),Object(n.useEffect)((function(){p&&o.a.database().ref("users/".concat(p.uid)).on("value",(function(e){var a=e.val();a&&(JSON.parse(a).admin&&d(!0))}))}),[p]);var J=function(e){var a=e.toISOString().substr(0,10),t=O.filter((function(e){return e.date===a}));return _.length-t.length},L=function(e){var a=new Date;return a.setHours(0,0,0,0),3!==e.getDay()||e.getTime()<a.getTime()},B=function(e,a){if(!a){var t=M.toISOString().substr(0,10);O.filter((function(e){var a=e.uid,n=e.date;return a===p.uid&&n===t})).length?alert("Vous avez d\xe9j\xe0 r\xe9serv\xe9 un cr\xe9neau pour ce jour !"):window.confirm("R\xe9server ce cr\xe9neau ?")&&function(e){var a=o.a.database().ref().child("slots").push().key,t=p.uid,n=p.email,r={uid:t,name:p.displayName,email:n,date:M.toISOString().substr(0,10),time:e},c={};c["/slots/"+a]=r,o.a.database().ref().update(c)}(e)}};return t?p?r.a.createElement("div",{className:"App"},r.a.createElement(b,{onLogout:function(){return o.a.auth().signOut().then((function(){h(null)})).catch((function(e){alert(e.message)}))}}),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement(g,{isDisabled:L,selectedDate:M,setSelectedDate:I,renderDay:function(e){return r.a.createElement("span",{className:"Calendar__day"},!L(e)&&J(e)>0&&r.a.createElement("span",{className:"badge"},J(e)),e.getDate())}})))),r.a.createElement("div",{className:"column"},M?_.map((function(e){var a=function(e){var a=M.toISOString().substr(0,10);return O.find((function(t){var n=t.date,r=t.time;return n===a&&r===e}))}(e),t=a&&a.uid===p.uid,n=a?r.a.createElement("span",null,r.a.createElement("span",{className:m()({"Meeting__slot--booked":!t,"Meeting__slot--isMine":t})},a.time)," ",u&&r.a.createElement("a",{href:"mailto:".concat(a.email)},a.name)):e;return r.a.createElement("div",{key:e,className:m()("Meeting__slot","card"),onClick:function(){return B(e,a)}},r.a.createElement("div",{className:"card-content Meeting__slot__content"},n))})):r.a.createElement(E,null)))):r.a.createElement("div",{className:"Login__container"},r.a.createElement("button",{className:"button is-danger",onClick:function(){var e=new o.a.auth.GoogleAuthProvider;o.a.auth().languageCode="fr",o.a.auth().signInWithPopup(e).then((function(e){var a=e.credential.accessToken,t=e.user;S(a),h(t)})).catch((function(e){alert(e.message)}))}},r.a.createElement("span",{className:"icon-google"}),"S'authentifier avec Google")):r.a.createElement("div",{className:"Login__container"},r.a.createElement("span",{className:"icon-spinner"}))},D={apiKey:"AIzaSyAiOCNMC1IMYw_DDWBsD6ci34Sprme-p2U",authDomain:"calendarapp-eee82.firebaseapp.com",databaseURL:"https://calendarapp-eee82.firebaseio.com",projectId:"calendarapp-eee82",storageBucket:"calendarapp-eee82.appspot.com",messagingSenderId:"609612855491",appId:"1:609612855491:web:826189c7044c44cff3ca76"};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.initializeApp(D),l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.cd46a540.chunk.js.map